---
title: "final_project_Daninhirsch"
output: html_document
---
POSSIBLE TESTS:
I think linear regression tests (and z-score tests) would be useful for this data set because it could show the relationships between different variables that make songs unique and how those songs are rated in the danceability category. It could help predict which variables are most likely indicators of high danceability.

Plotting this data would also be important to visualize those scores. Making a scatterplot or a histogram would likely be the most helpful.

I think weighting will also be a useful test because some factors might be more important to the danceability score than others, so it's important to account for that.

I'm not sure how exactly this could be helpful, but maybe some tests showing the margin of error (of what specifically, I'm not sure) could be useful.

When I get more into the specifics (maybe with a smaller sample of songs), I think a p-value test could be helpful to see if certain categories/attributions are more statistically significant than others in affecting the danceability score. Additionally, running a correlation test could be useful to see if specific attributes correlate to a higher score.



```{r}
library(tidyverse)
install.packages("janitor")
library(janitor)
```
```{r}
final_project <- read_csv("dataset.csv")
```

The data in this dataset contains a wide variety of songs and their danceability score as determined by a wide variety of factors. It also includes descriptors of the data, such as genre and whether or not the song is explicit. Most every other descriptor, though has a numerical value associated with it. The columns that I believe will be my most valuable to my analysis are danceability, energy, loudness, and genre, as I believe those columns would likely describe the danceability of songs the best. I'm not sure what information is missing; they have a popularity score, which is helpful for ranking the songs. Maybe I might need an individual rating on them, possibly from individual users. Some questions that I have include, where should I go from here? What exactly do I want to learn from this dataset, and what makes it newsworthy? I'm sure I can come up with something the deeper I look into this dataset, but I think getting started is the hardest part.



TRIALS, ERRORS, AND LESSONS

DESCRIPTIVE STATISTICS
Means and Standard Deviations:

I wanted to find the mean and standard deviation of the two factors I thought were the most influential to the general rating of a song, danceability and energy, because I wanted to see what the averages would be and how far the data spreads. Because the data spans a large range of songs, the mean is pretty middle-of-the-road in terms of danceability,and the data is clustered a bit closer to that central mean, but the mean for energy 

```{r}
final_project |> summarize(mean_danceability = mean(danceability), sd_energy = sd(danceability))
final_project |> summarize(mean_energy = mean(energy), sd_energy = sd(energy))


```

Z-scores: https://www.r-bloggers.com/2024/06/calculating-z-scores-in-r-a-step-by-step-guide/ 
```{r}
danceability <- final_project |>
  mutate(
    mean_danceability = mean(danceability),
    sd_danceability = sd(danceability),
    z_score = (danceability - mean_danceability) / sd_danceability
  )
```
The danceability z-scores show how far each song's value is from the mean. I used this to indicate how much of a range there was in the data. If you look at the danceability dataframe, the last column on the right can be organized in order of numerical value. The lowest z-score is -3.27 and the highest is 2.41. Those numbers, in the grand scheme of the data, are relatively far from the mean. 

Correlation
```{r}
danceability |> summarize(correlation = cor(energy, danceability, method="pearson"))
```
The correlation coefficient tells us that there is a weak but positive linear relationship between energy and danceability.
```{r}
danceability |> summarize(correlation = cor(danceability, popularity, method="pearson"))
```
```{r}
danceability |> summarize(correlation = cor(danceability, loudness, method="pearson"))
```
The last two correlation tests also show weak but positive linear relationships between the variables.
```{r}
danceability |> summarize(correlation = cor(danceability, tempo, method="pearson"))
```
Interestingly, there is a weak but negative relationship between tempo and danceability. Based on my prior experiences, I often feel like higher tempo songs are more danceable, but that's why we run these tests -- to check our hypotheses!

STATISTICAL TECHNIQUES AND VISUALIZATION
Linear regression: 
I chose to try linear regression models because linear regression is used to predict the value of a variable based on the value of another variable. My hypothesis was that the energy of a song could predict the danceability score of a song. It's hard to see with the sheer amoung of data points, and even though it is not a strong correlation, there is some level of positive correlation between the two variables.
```{r}
danceability |>
  ggplot(aes(x = `energy`, y = `danceability`)) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE, color = "red") +
  labs(x = "danceability", y = "energy", title = "Scatterplot of Danceability vs. Energy scores")
```
I'm also choosing to keep this as my primary visual because even though it's hard to see, it showcases that there are so many songs in the world and each one is unique. The correlation is not very strong, so that explains why the dots (or the mass) is all over the chart. 

This information below is good to have, especially the p-value and median, because those can be used to spot statistical significance and a general idea of where scores tend to lie based on different criteria.
*PS: I tried to run the block without the backticks, but it didn't work so I just kept them in.*
```{r}
model <- lm(`energy` ~ `danceability`, data = final_project)

summary(model)
```
Multiple Regression: These types of models quantify the relationships and assess which factors are significant predictors of success. Based on the test results below, when three factors are involved, it yields stronger, more determinate results in terms of the adjusted R-squared value. This means that those three variables indicate a better model fit than just two of those variables. I also ran these tests because they are more detailed than the correlation tests. 

```{r}
model <- lm(danceability ~ instrumentalness + energy, data = final_project)

summary(model)
```
```{r}
model <- lm(danceability ~ instrumentalness + energy + loudness, data = final_project)

summary(model)
```


ANOVA: finding differences in danceability or some other factor based on the track_genre
```{r}
anova_result <- aov(danceability ~ track_genre, data = danceability)
summary(anova_result)
```
The F-value, which measures the ratio of between-group variance to within-group variance, is quite large (714.1), indicating that the differences between track genres outweigh the variation within each type. The p-value is very low, indicating the differences between track genres are statistically significant at any reasonable significance level. The three asterisks (***) highlight that this is significant at the 0 level, and less so but still significant at the 0.001 level. So we can say that that there are real differences in danceability scores between the types of track genres, and that track genres are pretty influential in determining the danceability score.






Draft of a story pitch:
The story I'm pitching is: no single story.

I don't believe that this dataset in and of itself is newsworthy. It's not surprising that people like danceable songs and that certain genres are more danceable than others -- that's not news. Not a lot of factors are strongly correlated, anyway. But I do believe that this dataset is useful for news about the music industry. Say for example an artist is set to release new music, and you're writing a news article about it. You could use this dataset and the tests I ran to predict how well the new music will be received by the general public. Based on other factors including how famous the artist already is, you can predict how danceable it'll be, how popular the music could become. 

I do want to make it clear, though, that this data is a snapshot of one period in time. Music listenership is always changing. The popularity score -- avalue between 0 and 100, with 100 being the most popular -- shows  songs that are being played a lot right now (or when the data was gathered) will have a higher popularity than songs that were played a lot in the past. This, among the following, was one of my main findings.

Other findings include the fact that a lot of songs out there are simply average in the grand scheme of things; not too danceable but not too much of a downer. Many songs tend to fall in the middle of the road. Another thing I think is interesting about this dataset is that when you see a snapshot like this, you could even guess when the datta was gathered if you know when a certain song was released. Without looking at the publication date, I would guess that this dataset was likely gathered when Bad Bunny's album "Un Verano Sin TÃ­" came out in 2022, as a lot of songs from that album hit the top of the popularity list.

A potential problem in reporting could just be that there is a huge amount of music out there, and things change constantly. That could make it hard to predict a danceability rating, but a good reporting plan of attack would be to break down the elements of a new song and see how it could fit in to what data exists at the moment. Another "problem" to keep in mind is that everyone interprets music differently, so not every highly rated danceable song is danceable to everyone!
